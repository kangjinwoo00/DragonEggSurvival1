DragonEggSurvival
 â”œâ”€ pom.xml
 â”œâ”€ README.md
 â””â”€ src
    â””â”€ main
       â”œâ”€ java
       â”‚  â””â”€ me
       â”‚     â””â”€ koma
       â”‚        â””â”€ dragonegg
       â”‚           â”œâ”€ DragonEggSurvival.java
       â”‚           â”œâ”€ manager
       â”‚           â”‚  â”œâ”€ DayManager.java
       â”‚           â”‚  â”œâ”€ EggManager.java
       â”‚           â”‚  â””â”€ WorldBorderManager.java
       â”‚           â””â”€ listener
       â”‚              â”œâ”€ EggListener.java
       â”‚              â”œâ”€ MoveListener.java
       â”‚              â””â”€ DeathListener.java
       â””â”€ resources
          â””â”€ plugin.yml
<project xmlns="http://maven.apache.org/POM/4.0.0">
  <modelVersion>4.0.0</modelVersion>

  <groupId>me.koma</groupId>
  <artifactId>DragonEggSurvival</artifactId>
  <version>1.0</version>

  <properties>
    <java.version>17</java.version>
  </properties>

  <dependencies>
    <dependency>
      <groupId>io.papermc.paper</groupId>
      <artifactId>paper-api</artifactId>
      <version>1.20.4-R0.1-SNAPSHOT</version>
      <scope>provided</scope>
    </dependency>
  </dependencies>
</project>
name: DragonEggSurvival
main: me.koma.dragonegg.DragonEggSurvival
version: 1.0
api-version: 1.20
package me.koma.dragonegg.manager;

import java.util.HashSet;
import java.util.UUID;

public class EggManager {
    public static final HashSet<UUID> eggHolders = new HashSet<>();
}
package me.koma.dragonegg.listener;

import me.koma.dragonegg.manager.EggManager;
import org.bukkit.Material;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.player.PlayerInteractEvent;

public class EggListener implements Listener {

    @EventHandler
    public void onUse(PlayerInteractEvent e) {
        if (e.getItem() == null) return;
        if (e.getItem().getType() != Material.DRAGON_EGG) return;

        Player p = e.getPlayer();
        EggManager.eggHolders.add(p.getUniqueId());
        e.getItem().setAmount(0);

        p.sendMessage("Â§5ë“œëž˜ê³¤ ì•Œì„ í¡ìˆ˜í–ˆìŠµë‹ˆë‹¤.");
    }
}
package me.koma.dragonegg.manager;

import org.bukkit.Bukkit;
import org.bukkit.World;
import org.bukkit.entity.Player;
import org.bukkit.scheduler.BukkitRunnable;

public class DayManager extends BukkitRunnable {

    @Override
    public void run() {
        World world = Bukkit.getWorld("world");
        if (world == null) return;

        long days = world.getFullTime() / 24000;

        if (days >= 100) {
            for (Player p : Bukkit.getOnlinePlayers()) {
                if (EggManager.eggHolders.contains(p.getUniqueId())) {
                    Bukkit.broadcastMessage("Â§6ðŸ† ìš°ìŠ¹ìž: " + p.getName());
                    Bukkit.shutdown();
                }
            }
        }
    }
}
package me.koma.dragonegg.listener;

import me.koma.dragonegg.manager.EggManager;
import org.bukkit.Particle;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.player.PlayerMoveEvent;

public class MoveListener implements Listener {

    @EventHandler
    public void onMove(PlayerMoveEvent e) {
        Player p = e.getPlayer();
        if (!EggManager.eggHolders.contains(p.getUniqueId())) return;

        long time = p.getWorld().getTime();
        if (time > 12300) return; // ë°¤

        p.getWorld().spawnParticle(
                Particle.DUST,
                p.getLocation(),
                1
        );
    }
}
package me.koma.dragonegg.listener;

import me.koma.dragonegg.manager.EggManager;
import org.bukkit.Location;
import org.bukkit.Material;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.entity.PlayerDeathEvent;

public class DeathListener implements Listener {

    @EventHandler
    public void onDeath(PlayerDeathEvent e) {
        if (!EggManager.eggHolders.contains(e.getEntity().getUniqueId())) return;

        Location loc = e.getEntity().getLocation();
        loc.getBlock().setType(Material.OBSIDIAN);
        loc.clone().add(0, 1, 0).getBlock().setType(Material.DRAGON_EGG);
    }
}
package me.koma.dragonegg;

import me.koma.dragonegg.listener.*;
import me.koma.dragonegg.manager.DayManager;
import org.bukkit.Bukkit;
import org.bukkit.plugin.java.JavaPlugin;

public class DragonEggSurvival extends JavaPlugin {

    @Override
    public void onEnable() {
        Bukkit.getPluginManager().registerEvents(new EggListener(), this);
        Bukkit.getPluginManager().registerEvents(new MoveListener(), this);
        Bukkit.getPluginManager().registerEvents(new DeathListener(), this);

        new DayManager().runTaskTimer(this, 0, 1200);
    }
}
